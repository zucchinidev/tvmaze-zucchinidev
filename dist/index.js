!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("stream"),require("util"),require("http"),require("https"),require("url"),require("path"),require("crypto"),require("querystring")):"function"==typeof define&&define.amd?define("library",["stream","util","http","https","url","path","crypto","querystring"],t):"object"==typeof exports?exports.library=t(require("stream"),require("util"),require("http"),require("https"),require("url"),require("path"),require("crypto"),require("querystring")):e.library=t(e.stream,e.util,e.http,e.https,e.url,e.path,e.crypto,e.querystring)}(this,function(e,t,r,n,o,i,u,s){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t){e.exports=require("stream")},function(e,t){e.exports=require("util")},function(e,t,r){e.exports=r(3)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tvmaze=void 0;var n=r(4),o=function(e){return new n.Client(e)};t.tvmaze={createClient:o}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Client=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(5),s=n(u),c=r(13),a=n(c);t.Client=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{endpoint:"http://api.tvmaze.com"},r=t.endpoint;o(this,e),this.endpoint=r}return i(e,[{key:"shows",value:function(){return this.request("shows","GET")}},{key:"show",value:function(e){return this.request("shows/"+e,"GET")}},{key:"request",value:function(e,t,r){var n=this.endpoint+"/"+e;return r&&(n=n+"?"+a.default.encode(r)),(0,s.default)({uri:n,method:t,json:!0})}},{key:"search",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{single:!1},r=t.single,n=void 0;switch(r){case!1:n=this.request("search/shows","GET",{q:e});break;default:n=this.request("singlesearch/shows","GET",{q:e})}return n}},{key:"getPage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.request("shows","GET",{page:e})}}]),e}()},function(e,t,r){function n(e){return new Promise(function(t,r){o(e,function(e,n,o){if(e)r(e);else if(n.statusCode>=400)e=new Error("Status code "+n.statusCode),e.response=n,e.body=o,r(e);else{var i={body:o,response:n};t(i)}})})}const o=r(6);e.exports=n},function(e,t,r){"use strict";function n(e,t){function r(e,r){return f(s,"in reply",e,r,q),q?void f(s,"REFUSING TO CALL CALLBACK TWICE"):(q=!0,clearTimeout(g),f(s,"calling callback err("+e+")"),f(s,"statusCode:",b.statusCode),f(s,"reply headers:",b.headers),f(s,"content:",Buffer.isBuffer(r)?r.toString():r),t(e,b,r))}function n(t){if(f(s,"in collect"),!e.json)return r(null,t);try{var n=JSON.parse(t)}catch(e){return r(e)}return r(null,n)}if(null==e)throw new TypeError("Options parameter is required");if(null==t||"function"!=typeof t)throw new TypeError("callback is required");var s=c+"-"+p,l=o(e),h=i;"https"==l.scheme&&(f(s,"using https transport"),h=u);var d,y=!1;null!=e.body&&("string"==typeof e.body||Buffer.isBuffer(e.body)?(f("Detected simple body"),d=e.body):null!=e.body.pipe&&"function"==typeof e.body.pipe?(f("Detected stream body"),d=e.body,y=!0):(f("Detected object body, will JSON-serialize"),d=JSON.stringify(e.body)));var b={},q=!1;f(s,"About to send request",l),f(s,"calledBack:",q);var v=h.request(l,function(e){if(b=e,0===parseInt(e.headers["content-length"],10))return r(null,null);e.pipe(a(n)),e.once("error",function(e){return r(e)})}),m=v.abort;v.abort=function(){clearTimeout(g),f(s,"aborting request"),m.call(this)};var g;return e.timeout&&(g=setTimeout(function(){return v.abort(),r(new Error("client request timeout"))},e.timeout),v.setTimeout(e.timeout,function(){return v.abort(),r(new Error("Socket Timeout on client request"))})),v.once("abort",function(){f(s,"ABORT",this.aborted)}),v.once("error",function(e){return f(s,"req error event"),r(e)}),y?(f("sending stream body"),d.pipe(v)):(null!=d&&(f(s,"data:",d),v.write(d)),v.end()),p++,v}function o(e){var t=e.headers||{},r=s.parse(e.uri),n=r.auth||e.auth;n&&(t.authorization="Basic "+Buffer(n).toString("base64"));var o=r.protocol||"",i={scheme:o.replace(/:$/,""),method:e.method||"GET",host:r.hostname,port:Number(r.port)||("https:"===o?443:80),path:r.path,headers:t,withCredentials:e.withCredentials||!1};return"https:"===o&&["pfx","key","cert","ca","ciphers","rejectUnauthorized","secureProtocol"].forEach(function(t){e[t]&&(i[t]=e[t])}),null!=e.agent&&(i.agent=e.agent),i}e.exports=n;var i=r(7),u=r(8),s=r(9),c=(r(10),r(11).randomBytes(3).toString("hex")),a=(r(0).PassThrough,r(12)),l=r(1),f=function(){};null!=l.debuglog&&(f=l.debuglog("client-request"));var p=0},function(e,t){e.exports=require("http")},function(e,t){e.exports=require("https")},function(e,t){e.exports=require("url")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("crypto")},function(e,t,r){"use strict";function n(e,t){if(!(this instanceof n))return new n(e,t);"function"==typeof e&&(t=e,e={}),"function"!=typeof t&&(t=function(){this._collection=[]}),null==e&&(e={}),this.options=e,this.callback=t,this._collection=[],o.call(this,this.options),this.on("finish",this._done)}e.exports=n;var o=r(0).Writable;(0,r(1).inherits)(n,o),n.prototype._write=function(e,t,r){this._collection.push(e),r()},n.prototype._done=function(){this.options.objectMode?this.callback.call(this,this._collection):this.callback.call(this,Buffer.concat(this._collection))}},function(e,t){e.exports=require("querystring")}])});